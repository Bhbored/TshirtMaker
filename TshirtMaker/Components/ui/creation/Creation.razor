<div class="creation-content">
    <div class="creation-grid creation-grid-4">
        @if (ImageUrls != null && ImageUrls.Count > 0)
        {
            @foreach (var imageUrl in ImageUrls)
            {
                <div class="creation-image-card @(selectedImageUrl == imageUrl ? "selected" : "")"
                     @onclick="@(() => SelectImage(imageUrl))">
                    <div class="creation-image-overlay">
                        @if (selectedImageUrl == imageUrl)
                        {
                            <div class="creation-selected-badge">
                                <span class="material-symbols-outlined">check_circle</span>
                            </div>
                        }
                    </div>
                    <img src="@imageUrl" alt="Generated Design" class="creation-image" loading="lazy" />
                </div>
            }
        }
    </div>
</div>

@code {
    [Parameter]
    public List<string>? ImageUrls { get; set; }

    [Parameter]
    public EventCallback<string> OnImageSelected { get; set; }

    private string? selectedImageUrl = null;

    private async Task SelectImage(string imageUrl)
    {
        // Only one can be selected at a time - this ensures single selection
        selectedImageUrl = imageUrl;
        StateHasChanged();
        await OnImageSelected.InvokeAsync(imageUrl);
    }
}